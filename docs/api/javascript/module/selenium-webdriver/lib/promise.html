<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>selenium-webdriver/lib/promise</title><link href="../../../dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main><article><section class="intro" ><div class="header"><h1 class="title"><div>Module selenium-webdriver/lib/promise</div></h1></div><div class="body"><blockquote>
<h3>IMPORTANT NOTICE</h3>
<p>The promise manager contained in this module is in the process of being
phased out in favor of native JavaScript promises. This will be a long
process and will not be completed until there have been two major LTS Node
releases (approx. Node v10.0) that support
<a href="https://tc39.github.io/ecmascript-asyncawait/">async functions</a>.</p>
<p>At this time, the promise manager can be disabled by setting an environment
variable, <code>SELENIUM_PROMISE_MANAGER&#61;0</code>. In the absence of async functions,
users may use generators with the
<a href="promise.html#consume"><code>promise.consume()</code></a> function to write &#34;synchronous&#34;
style tests:</p>
<pre><code class="language-js">const {Builder, By, promise, until} &#61; require(&#39;selenium-webdriver&#39;);

let result &#61; promise.consume(function* doGoogleSearch() {
  let driver &#61; new Builder().forBrowser(&#39;firefox&#39;).build();
  yield driver.get(&#39;http://www.google.com/ncr&#39;);
  yield driver.findElement(By.name(&#39;q&#39;)).sendKeys(&#39;webdriver&#39;);
  yield driver.findElement(By.name(&#39;btnG&#39;)).click();
  yield driver.wait(until.titleIs(&#39;webdriver - Google Search&#39;), 1000);
  yield driver.quit();
});

result.then(_ &#61;&gt; console.log(&#39;SUCCESS!&#39;),
            e &#61;&gt; console.error(&#39;FAILURE: &#39; &#43; e));
</code></pre>
<p>The motivation behind this change and full deprecation plan are documented
in <a href="https://github.com/SeleniumHQ/selenium/issues/2969">issue 2969</a>.</p>
</blockquote>
<p>The promise module is centered around the <a href="promise_exports_ControlFlow.html">ControlFlow</a>, a class
that coordinates the execution of asynchronous tasks. The ControlFlow allows
users to focus on the imperative commands for their script without worrying
about chaining together every single asynchronous action, which can be
tedious and verbose. APIs may be layered on top of the control flow to read
as if they were synchronous. For instance, the core
<a href="webdriver_exports_WebDriver.html">WebDriver</a> API is built on top of the
control flow, allowing users to write</p>
<pre><code> driver.get(&#39;http://www.google.com/ncr&#39;);
 driver.findElement({name: &#39;q&#39;}).sendKeys(&#39;webdriver&#39;);
 driver.findElement({name: &#39;btnGn&#39;}).click();
</code></pre>
<p>instead of</p>
<pre><code> driver.get(&#39;http://www.google.com/ncr&#39;)
 .then(function() {
   return driver.findElement({name: &#39;q&#39;});
 })
 .then(function(q) {
   return q.sendKeys(&#39;webdriver&#39;);
 })
 .then(function() {
   return driver.findElement({name: &#39;btnG&#39;});
 })
 .then(function(btnG) {
   return btnG.click();
 });
</code></pre>
<h2>Tasks and Task Queues</h2>
<p>The control flow is based on the concept of tasks and task queues. Tasks are
functions that define the basic unit of work for the control flow to execute.
Each task is scheduled via <a href="promise_exports_ControlFlow.html#execute"><code>ControlFlow#execute()</code></a>, which will return
a <a href="promise_exports_Promise.html"><code>ManagedPromise</code></a> that will be resolved with the task&#39;s result.</p>
<p>A task queue contains all of the tasks scheduled within a single turn of the
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop">JavaScript event loop</a>. The control flow will create a new task queue
the first time a task is scheduled within an event loop.</p>
<pre><code> var flow &#61; promise.controlFlow();
 flow.execute(foo);       // Creates a new task queue and inserts foo.
 flow.execute(bar);       // Inserts bar into the same queue as foo.
 setTimeout(function() {
   flow.execute(baz);     // Creates a new task queue and inserts baz.
 }, 0);
</code></pre>
<p>Whenever the control flow creates a new task queue, it will automatically
begin executing tasks in the next available turn of the event loop. This
execution is <a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">scheduled as a microtask</a> like e.g. a
(native) <code>Promise.then()</code> callback.</p>
<pre><code> setTimeout(() &#61;&gt; console.log(&#39;a&#39;));
 Promise.resolve().then(() &#61;&gt; console.log(&#39;b&#39;));  // A native promise.
 flow.execute(() &#61;&gt; console.log(&#39;c&#39;));
 Promise.resolve().then(() &#61;&gt; console.log(&#39;d&#39;));
 setTimeout(() &#61;&gt; console.log(&#39;fin&#39;));
 // b
 // c
 // d
 // a
 // fin
</code></pre>
<p>In the example above, b/c/d is logged before a/fin because native promises
and this module use &#34;microtask&#34; timers, which have a higher priority than
&#34;macrotasks&#34; like <code>setTimeout</code>.</p>
<h2>Task Execution</h2>
<p>Upon creating a task queue, and whenever an existing queue completes a task,
the control flow will schedule a microtask timer to process any scheduled
tasks. This ensures no task is ever started within the same turn of the
JavaScript event loop in which it was scheduled, nor is a task ever started
within the same turn that another finishes.</p>
<p>When the execution timer fires, a single task will be dequeued and executed.
There are several important events that may occur while executing a task
function:</p>
<ol><li>A new task queue is created by a call to <a href="promise_exports_ControlFlow.html#execute"><code>ControlFlow#execute()</code></a>.
Any tasks scheduled within this task queue are considered subtasks of the
current task.</li><li>The task function throws an error. Any scheduled tasks are immediately
discarded and the task&#39;s promised result (previously returned by
<a href="promise_exports_ControlFlow.html#execute"><code>ControlFlow#execute()</code></a>) is immediately rejected with the thrown
error.</li><li>The task function returns successfully.</li></ol>
<p>If a task function created a new task queue, the control flow will wait for
that queue to complete before processing the task result. If the queue
completes without error, the flow will settle the task&#39;s promise with the
value originally returned by the task function. On the other hand, if the task
queue terminates with an error, the task&#39;s promise will be rejected with that
error.</p>
<pre><code> flow.execute(function() {
   flow.execute(() &#61;&gt; console.log(&#39;a&#39;));
   flow.execute(() &#61;&gt; console.log(&#39;b&#39;));
 });
 flow.execute(() &#61;&gt; console.log(&#39;c&#39;));
 // a
 // b
 // c
</code></pre>
<h2>ManagedPromise Integration</h2>
<p>In addition to the <a href="promise_exports_ControlFlow.html"><code>ControlFlow</code></a> class, the promise module also exports
a <a href="https://promisesaplus.com/">Promises/A&#43;</a> <a href="promise_exports_Promise.html">implementation</a> that is deeply
integrated with the ControlFlow. First and foremost, each promise
<a href="promise_exports_Promise.html#then">callback</a> is scheduled with the
control flow as a task. As a result, each callback is invoked in its own turn
of the JavaScript event loop with its own task queue. If any tasks are
scheduled within a callback, the callback&#39;s promised result will not be
settled until the task queue has completed.</p>
<pre><code> promise.fulfilled().then(function() {
   flow.execute(function() {
     console.log(&#39;b&#39;);
   });
 }).then(() &#61;&gt; console.log(&#39;a&#39;));
 // b
 // a
</code></pre>
<h3>Scheduling ManagedPromise Callbacks <a id="scheduling_callbacks"></a></h3>
<p>How callbacks are scheduled in the control flow depends on when they are
attached to the promise. Callbacks attached to a <em>previously</em> resolved
promise are immediately enqueued as subtasks of the currently running task.</p>
<pre><code> var p &#61; promise.fulfilled();
 flow.execute(function() {
   flow.execute(() &#61;&gt; console.log(&#39;A&#39;));
   p.then(      () &#61;&gt; console.log(&#39;B&#39;));
   flow.execute(() &#61;&gt; console.log(&#39;C&#39;));
   p.then(      () &#61;&gt; console.log(&#39;D&#39;));
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // A
 // B
 // C
 // D
 // fin
</code></pre>
<p>When a promise is resolved while a task function is on the call stack, any
callbacks also registered in that stack frame are scheduled as if the promise
were already resolved:</p>
<pre><code> var d &#61; promise.defer();
 flow.execute(function() {
   flow.execute(  () &#61;&gt; console.log(&#39;A&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;B&#39;));
   flow.execute(  () &#61;&gt; console.log(&#39;C&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;D&#39;));

   d.fulfill();
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // A
 // B
 // C
 // D
 // fin
</code></pre>
<p>Callbacks attached to an <em>unresolved</em> promise within a task function are
only weakly scheduled as subtasks and will be dropped if they reach the
front of the queue before the promise is resolved. In the example below, the
callbacks for <code>B</code> &amp; <code>D</code> are dropped as sub-tasks since they are attached to
an unresolved promise when they reach the front of the task queue.</p>
<pre><code> var d &#61; promise.defer();
 flow.execute(function() {
   flow.execute(  () &#61;&gt; console.log(&#39;A&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;B&#39;));
   flow.execute(  () &#61;&gt; console.log(&#39;C&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;D&#39;));

   setTimeout(d.fulfill, 20);
 }).then(function() {
   console.log(&#39;fin&#39;)
 });
 // A
 // C
 // fin
 // B
 // D
</code></pre>
<p>If a promise is resolved while a task function is on the call stack, any
previously registered and unqueued callbacks (i.e. either attached while no
task was on the call stack, or previously dropped as described above) act as
<em>interrupts</em> and are inserted at the front of the task queue. If multiple
promises are fulfilled, their interrupts are enqueued in the order the
promises are resolved.</p>
<pre><code> var d1 &#61; promise.defer();
 d1.promise.then(() &#61;&gt; console.log(&#39;A&#39;));

 var d2 &#61; promise.defer();
 d2.promise.then(() &#61;&gt; console.log(&#39;B&#39;));

 flow.execute(function() {
   d1.promise.then(() &#61;&gt; console.log(&#39;C&#39;));
   flow.execute(() &#61;&gt; console.log(&#39;D&#39;));
 });
 flow.execute(function() {
   flow.execute(() &#61;&gt; console.log(&#39;E&#39;));
   flow.execute(() &#61;&gt; console.log(&#39;F&#39;));
   d1.fulfill();
   d2.fulfill();
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // D
 // A
 // C
 // B
 // E
 // F
 // fin
</code></pre>
<p>Within a task function (or callback), each step of a promise chain acts as
an interrupt on the task queue:</p>
<pre><code> var d &#61; promise.defer();
 flow.execute(function() {
   d.promise.
       then(() &#61;&gt; console.log(&#39;A&#39;)).
       then(() &#61;&gt; console.log(&#39;B&#39;)).
       then(() &#61;&gt; console.log(&#39;C&#39;)).
       then(() &#61;&gt; console.log(&#39;D&#39;));

   flow.execute(() &#61;&gt; console.log(&#39;E&#39;));
   d.fulfill();
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // A
 // B
 // C
 // D
 // E
 // fin
</code></pre>
<p>If there are multiple promise chains derived from a single promise, they are
processed in the order created:</p>
<pre><code> var d &#61; promise.defer();
 flow.execute(function() {
   var chain &#61; d.promise.then(() &#61;&gt; console.log(&#39;A&#39;));

   chain.then(() &#61;&gt; console.log(&#39;B&#39;)).
       then(() &#61;&gt; console.log(&#39;C&#39;));

   chain.then(() &#61;&gt; console.log(&#39;D&#39;)).
       then(() &#61;&gt; console.log(&#39;E&#39;));

   flow.execute(() &#61;&gt; console.log(&#39;F&#39;));

   d.fulfill();
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // A
 // B
 // C
 // D
 // E
 // F
 // fin
</code></pre>
<p>Even though a subtask&#39;s promised result will never resolve while the task
function is on the stack, it will be treated as a promise resolved within the
task. In all other scenarios, a task&#39;s promise behaves just like a normal
promise. In the sample below, <code>C/D</code> is logged before <code>B</code> because the
resolution of <code>subtask1</code> interrupts the flow of the enclosing task. Within
the final subtask, <code>E/F</code> is logged in order because <code>subtask1</code> is a resolved
promise when that task runs.</p>
<pre><code> flow.execute(function() {
   var subtask1 &#61; flow.execute(() &#61;&gt; console.log(&#39;A&#39;));
   var subtask2 &#61; flow.execute(() &#61;&gt; console.log(&#39;B&#39;));

   subtask1.then(() &#61;&gt; console.log(&#39;C&#39;));
   subtask1.then(() &#61;&gt; console.log(&#39;D&#39;));

   flow.execute(function() {
     flow.execute(() &#61;&gt; console.log(&#39;E&#39;));
     subtask1.then(() &#61;&gt; console.log(&#39;F&#39;));
   });
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // A
 // C
 // D
 // B
 // E
 // F
 // fin
</code></pre>
<p>Finally, consider the following:</p>
<pre><code> var d &#61; promise.defer();
 d.promise.then(() &#61;&gt; console.log(&#39;A&#39;));
 d.promise.then(() &#61;&gt; console.log(&#39;B&#39;));

 flow.execute(function() {
   flow.execute(  () &#61;&gt; console.log(&#39;C&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;D&#39;));

   flow.execute(  () &#61;&gt; console.log(&#39;E&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;F&#39;));

   d.fulfill();

   flow.execute(  () &#61;&gt; console.log(&#39;G&#39;));
   d.promise.then(() &#61;&gt; console.log(&#39;H&#39;));
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // A
 // B
 // C
 // D
 // E
 // F
 // G
 // H
 // fin
</code></pre>
<p>In this example, callbacks are registered on <code>d.promise</code> both before and
during the invocation of the task function. When <code>d.fulfill()</code> is called,
the callbacks registered before the task (<code>A</code> &amp; <code>B</code>) are registered as
interrupts. The remaining callbacks were all attached within the task and
are scheduled in the flow as standard tasks.</p>
<h2>Generator Support</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*">Generators</a> may be scheduled as tasks within a control flow or attached
as callbacks to a promise. Each time the generator yields a promise, the
control flow will wait for that promise to settle before executing the next
iteration of the generator. The yielded promise&#39;s fulfilled value will be
passed back into the generator:</p>
<pre><code> flow.execute(function* () {
   var d &#61; promise.defer();

   setTimeout(() &#61;&gt; console.log(&#39;...waiting...&#39;), 25);
   setTimeout(() &#61;&gt; d.fulfill(123), 50);

   console.log(&#39;start: &#39; &#43; Date.now());

   var value &#61; yield d.promise;
   console.log(&#39;mid: %d; value &#61; %d&#39;, Date.now(), value);

   yield promise.delayed(10);
   console.log(&#39;end: &#39; &#43; Date.now());
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // start: 0
 // ...waiting...
 // mid: 50; value &#61; 123
 // end: 60
 // fin
</code></pre>
<p>Yielding the result of a promise chain will wait for the entire chain to
complete:</p>
<pre><code> promise.fulfilled().then(function* () {
   console.log(&#39;start: &#39; &#43; Date.now());

   var value &#61; yield flow.
       execute(() &#61;&gt; console.log(&#39;A&#39;)).
       then(   () &#61;&gt; console.log(&#39;B&#39;)).
       then(   () &#61;&gt; 123);

   console.log(&#39;mid: %s; value &#61; %d&#39;, Date.now(), value);

   yield flow.execute(() &#61;&gt; console.log(&#39;C&#39;));
 }).then(function() {
   console.log(&#39;fin&#39;);
 });
 // start: 0
 // A
 // B
 // mid: 2; value &#61; 123
 // C
 // fin
</code></pre>
<p>Yielding a <em>rejected</em> promise will cause the rejected value to be thrown
within the generator function:</p>
<pre><code> flow.execute(function* () {
   console.log(&#39;start: &#39; &#43; Date.now());
   try {
     yield promise.delayed(10).then(function() {
       throw Error(&#39;boom&#39;);
     });
   } catch (ex) {
     console.log(&#39;caught time: &#39; &#43; Date.now());
     console.log(ex.message);
   }
 });
 // start: 0
 // caught time: 10
 // boom
</code></pre>
<h1>Error Handling</h1>
<p>ES6 promises do not require users to handle a promise rejections. This can
result in subtle bugs as the rejections are silently &#34;swallowed&#34; by the
Promise class.</p>
<pre><code> Promise.reject(Error(&#39;boom&#39;));
 // ... *crickets* ...
</code></pre>
<p>Selenium&#39;s promise module, on the other hand, requires that every rejection
be explicitly handled. When a <a href="promise_exports_Promise.html">ManagedPromise</a> is
rejected and no callbacks are defined on that promise, it is considered an
<em>unhandled rejection</em> and reported to the active task queue. If the rejection
remains unhandled after a single turn of the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop">event loop</a> (scheduled
with a microtask), it will propagate up the stack.</p>
<h2>Error Propagation</h2>
<p>If an unhandled rejection occurs within a task function, that task&#39;s promised
result is rejected and all remaining subtasks are discarded:</p>
<pre><code> flow.execute(function() {
   // No callbacks registered on promise -&gt; unhandled rejection
   promise.rejected(Error(&#39;boom&#39;));
   flow.execute(function() { console.log(&#39;this will never run&#39;); });
 }).catch(function(e) {
   console.log(e.message);
 });
 // boom
</code></pre>
<p>The promised results for discarded tasks are silently rejected with a
cancellation error and existing callback chains will never fire.</p>
<pre><code> flow.execute(function() {
   promise.rejected(Error(&#39;boom&#39;));
   flow.execute(function() { console.log(&#39;a&#39;); }).
       then(function() { console.log(&#39;b&#39;); });
 }).catch(function(e) {
   console.log(e.message);
 });
 // boom
</code></pre>
<p>An unhandled rejection takes precedence over a task function&#39;s returned
result, even if that value is another promise:</p>
<pre><code> flow.execute(function() {
   promise.rejected(Error(&#39;boom&#39;));
   return flow.execute(someOtherTask);
 }).catch(function(e) {
   console.log(e.message);
 });
 // boom
</code></pre>
<p>If there are multiple unhandled rejections within a task, they are packaged
in a <a href="promise_exports_MultipleUnhandledRejectionError.html"><code>MultipleUnhandledRejectionError</code></a>, which has an <code>errors</code> property
that is a <code>Set</code> of the recorded unhandled rejections:</p>
<pre><code> flow.execute(function() {
   promise.rejected(Error(&#39;boom1&#39;));
   promise.rejected(Error(&#39;boom2&#39;));
 }).catch(function(ex) {
   console.log(ex instanceof MultipleUnhandledRejectionError);
   for (var e of ex.errors) {
     console.log(e.message);
   }
 });
 // boom1
 // boom2
</code></pre>
<p>When a subtask is discarded due to an unreported rejection in its parent
frame, the existing callbacks on that task will never settle and the
callbacks will not be invoked. If a new callback is attached to the subtask
<em>after</em> it has been discarded, it is handled the same as adding a callback
to a cancelled promise: the error-callback path is invoked. This behavior is
intended to handle cases where the user saves a reference to a task promise,
as illustrated below.</p>
<pre><code> var subTask;
 flow.execute(function() {
   promise.rejected(Error(&#39;boom&#39;));
   subTask &#61; flow.execute(function() {});
 }).catch(function(e) {
   console.log(e.message);
 }).then(function() {
   return subTask.then(
       () &#61;&gt; console.log(&#39;subtask success!&#39;),
       (e) &#61;&gt; console.log(&#39;subtask failed:\n&#39; &#43; e));
 });
 // boom
 // subtask failed:
 // DiscardedTaskError: Task was discarded due to a previous failure: boom
</code></pre>
<p>When a subtask fails, its promised result is treated the same as any other
promise: it must be handled within one turn of the rejection or the unhandled
rejection is propagated to the parent task. This means users can catch errors
from complex flows from the top level task:</p>
<pre><code> flow.execute(function() {
   flow.execute(function() {
     flow.execute(function() {
       throw Error(&#39;fail!&#39;);
     });
   });
 }).catch(function(e) {
   console.log(e.message);
 });
 // fail!
</code></pre>
<h2>Unhandled Rejection Events</h2>
<p>When an unhandled rejection propagates to the root of the control flow, the
flow will emit an <strong>uncaughtException</strong> event. If no listeners are registered
on the flow, the error will be rethrown to the global error handler: an
<strong>uncaughtException</strong> event from the
<a href="https://nodejs.org/api/process.html"><code>process</code></a> object in node, or
<code>window.onerror</code> when running in a browser.</p>
<p>Bottom line: you <strong><em>must</em></strong> handle rejected promises.</p>
<h1>Promises/A&#43; Compatibility</h1>
<p>This <code>promise</code> module is compliant with the <a href="https://promisesaplus.com/">Promises/A&#43;</a> specification
except for sections <code>2.2.6.1</code> and <code>2.2.6.2</code>:</p>
<blockquote>
<ul><li><code>then</code> may be called multiple times on the same promise.
<ul><li>If/when <code>promise</code> is fulfilled, all respective <code>onFulfilled</code> callbacks
must execute in the order of their originating calls to <code>then</code>.</li><li>If/when <code>promise</code> is rejected, all respective <code>onRejected</code> callbacks
must execute in the order of their originating calls to <code>then</code>.</li></ul>
</li></ul>
</blockquote>
<p>Specifically, the conformance tests contain the following scenario (for
brevity, only the fulfillment version is shown):</p>
<pre><code> var p1 &#61; Promise.resolve();
 p1.then(function() {
   console.log(&#39;A&#39;);
   p1.then(() &#61;&gt; console.log(&#39;B&#39;));
 });
 p1.then(() &#61;&gt; console.log(&#39;C&#39;));
 // A
 // C
 // B
</code></pre>
<p>Since the <a href="#scheduling_callbacks">ControlFlow</a> executes promise callbacks as
tasks, with this module, the result would be:</p>
<pre><code> var p2 &#61; promise.fulfilled();
 p2.then(function() {
   console.log(&#39;A&#39;);
   p2.then(() &#61;&gt; console.log(&#39;B&#39;);
 });
 p2.then(() &#61;&gt; console.log(&#39;C&#39;));
 // A
 // B
 // C
</code></pre>
<div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3363" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="instance-methods"><h2>Exported Functions</h2><section class="property expandable"  id="all"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>all<var class="template">&lt;T&gt;</var>( <var>arr</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(T|null)&gt;&gt;</code></div></h3></div><div class="body"><p>Given an array of promises, will return a promise that will be fulfilled
with the fulfillment values of the input array&#39;s values. If any of the
input array&#39;s promises are rejected, the returned promise will be rejected
with the same reason.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>arr</var></td><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(T|<a href="promise_exports_Promise.html" title="selenium-webdriver/lib/promise.Promise">Promise</a>&lt;(T|null)&gt;|null)&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>An array of
promises to wait on.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(T|null)&gt;&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A promise that is
fulfilled with an array containing the fulfilled values of the
input array, or rejected with the same reason as the first
rejected value.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3373" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="asap"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>asap( <var>value</var>, <var>callback</var>, <var>opt_errback</var> ) <var class="yield">→</var> <code class="expression"><i>void</i></code></div></h3></div><div class="body"><p>Invokes the appropriate callback function as soon as a promised <code>value</code> is
resolved.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>value</var></td><td class="info-cell" ><code class="expression">*</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The value to observe.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>callback</var></td><td class="info-cell" ><code class="expression">(Function|null)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to call when the value is
resolved successfully.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_errback</var></td><td class="info-cell" ><code class="expression">(Function|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to call when the value is
rejected.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3374" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="captureStackTrace"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>captureStackTrace( <var>name</var>, <var>msg</var>, <var>opt_topFn</var> ) <var class="yield">→</var> <code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank">Error</a></code></div></h3></div><div class="body"><p>Generates an error to capture the current stack trace.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>name</var></td><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>Error name for this stack trace.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>msg</var></td><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank">string</a></code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>Message to record.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_topFn</var></td><td class="info-cell" ><code class="expression">(Function|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function that should appear at the top of
the stack; only applicable in V8.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank">Error</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>The generated error.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3375" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="checkedNodeCall"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>checkedNodeCall( <var>fn</var>, <var>...var_args</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></div></h3></div><div class="body"><p>Wraps a function that expects a node-style callback as its final
argument. This callback expects two arguments: an error value (which will be
null if the call succeeded), and the success value as the second argument.
The callback will the resolve or reject the returned promise, based on its
arguments.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>fn</var></td><td class="info-cell" ><code class="expression">Function</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to wrap.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>var_args</var></td><td class="info-cell" ><code class="expression">...?</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The arguments to apply to the function, excluding the
final callback.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A promise that will be resolved with the
result of the provided function&#39;s callback.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3376" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="consume"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>consume( <var>generatorFn</var>, <var>opt_self</var>, <var>...var_args</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;?&gt;</code></div></h3></div><div class="body"><p>Consumes a <code>GeneratorFunction</code>. Each time the generator yields a
promise, this function will wait for it to be fulfilled before feeding the
fulfilled value back into <code>next</code>. Likewise, if a yielded promise is
rejected, the rejection error will be passed to <code>throw</code>.</p>
<p><strong>Example 1:</strong> the Fibonacci Sequence.</p>
<pre><code> promise.consume(function* fibonacci() {
   var n1 &#61; 1, n2 &#61; 1;
   for (var i &#61; 0; i &lt; 4; &#43;&#43;i) {
     var tmp &#61; yield n1 &#43; n2;
     n1 &#61; n2;
     n2 &#61; tmp;
   }
   return n1 &#43; n2;
 }).then(function(result) {
   console.log(result);  // 13
 });
</code></pre>
<p><strong>Example 2:</strong> a generator that throws.</p>
<pre><code> promise.consume(function* () {
   yield promise.delayed(250).then(function() {
     throw Error(&#39;boom&#39;);
   });
 }).catch(function(e) {
   console.log(e.toString());  // Error: boom
 });
</code></pre>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>generatorFn</var></td><td class="info-cell" ><code class="expression">Function</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The generator function to execute.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_self</var></td><td class="info-cell" ><code class="expression">(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank">Object</a>|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The object to use as &#34;this&#34; when invoking the
initial generator.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>var_args</var></td><td class="info-cell" ><code class="expression">...*</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>Any arguments to pass to the initial generator.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;?&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A promise that will resolve to the
generator&#39;s final result.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Throws</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression">(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" target="_blank">TypeError</a>|null)</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>If the given function is not a generator.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3377" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="controlFlow"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>controlFlow() <var class="yield">→</var> <code class="expression"><a href="promise_exports_ControlFlow.html" title="selenium-webdriver/lib/promise.ControlFlow">ControlFlow</a></code></div></h3></div><div class="body"><table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><p>None.</p></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_ControlFlow.html" title="selenium-webdriver/lib/promise.ControlFlow">ControlFlow</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>The currently active control flow.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3378" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="createFlow"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>createFlow( <var>callback</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></div></h3></div><div class="body"><p>Creates a new control flow. The provided callback will be invoked as the
first task within the new flow, with the flow as its sole argument. Returns
a promise that resolves to the callback result.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>callback</var></td><td class="info-cell" ><code class="expression">function(<a href="promise_exports_ControlFlow.html" title="selenium-webdriver/lib/promise.ControlFlow">ControlFlow</a>): ?</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The entry point
to the newly created flow.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A promise that resolves to the callback result.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3379" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="createPromise"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>createPromise<var class="template">&lt;T&gt;</var>( <var>resolver</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;(T|null)&gt;</code></div></h3></div><div class="body"><p>Creates a new promise with the given <code>resolver</code> function. If the promise
manager is currently enabled, the returned promise will be a
<a href="promise_exports_Promise.html">ManagedPromise</a> instance. Otherwise, it will be a native promise.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>resolver</var></td><td class="info-cell" ><code class="expression">function(function(()): ?, function(*): ?): ?</code></td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;(T|null)&gt;</code></td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3380" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="defer"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>defer<var class="template">&lt;T&gt;</var>() <var class="yield">→</var> <code class="expression"><a href="promise_exports_Resolver.html" title="selenium-webdriver/lib/promise.Resolver">Resolver</a>&lt;(T|null)&gt;</code></div></h3></div><div class="body"><p>Creates a new deferred resolver.</p>
<p>If the promise manager is currently enabled, this function will return a
<a href="promise_exports_Deferred.html"><code>Deferred</code></a> instance. Otherwise, it will return a resolver for a
native promise.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><p>None.</p></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Resolver.html" title="selenium-webdriver/lib/promise.Resolver">Resolver</a>&lt;(T|null)&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A new deferred resolver.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3381" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="delayed"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>delayed( <var>ms</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></div></h3></div><div class="body"><p>Creates a promise that will be resolved at a set time in the future.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>ms</var></td><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank">number</a></code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The amount of time, in milliseconds, to wait before
resolving the promise.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>The promise.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3382" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="filter"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>filter<var class="template">&lt;TYPE, SELF&gt;</var>( <var>arr</var>, <var>fn</var>, <var>opt_self</var> ) <var class="yield">→</var> <code class="expression"><i>void</i></code></div></h3></div><div class="body"><p>Calls a function for each element in an array, and if the function returns
true adds the element to a new array.</p>
<p>If the return value of the filter function is a promise, this function
will wait for it to be fulfilled before determining whether to insert the
element into the new array.</p>
<p>If the filter function throws or returns a rejected promise, the promise
returned by this function will be rejected with the same reason. Only the
first failure will be reported; all subsequent errors will be silently
ignored.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>arr</var></td><td class="info-cell" ><code class="expression">(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(TYPE|null)&gt;|<a href="promise_exports_Promise.html" title="selenium-webdriver/lib/promise.Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(TYPE|null)&gt;&gt;)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The
array to iterator over, or a promise that will resolve to said array.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>fn</var></td><td class="info-cell" ><code class="expression">function(this: (SELF|null), (TYPE|null), <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank">number</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(TYPE|null)&gt;): (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a>|<a href="promise_exports_Promise.html" title="selenium-webdriver/lib/promise.Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a>&gt;|null)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function
to call for each element in the array.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_self</var></td><td class="info-cell" ><code class="expression">(SELF|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The object to be used as the value of &#39;this&#39; within
<code>fn</code>.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3383" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="finally"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>finally<var class="template">&lt;R&gt;</var>( <var>promise</var>, <var>callback</var> ) <var class="yield">→</var> <code class="expression"><a href="https://github.com/google/closure-compiler/wiki/Special-types-in-the-Closure-Type-System#ithenable" target="_blank">IThenable</a>&lt;(R|null)&gt;</code></div></h3></div><div class="body"><p>Registers a listener to invoke when a promise is resolved, regardless
of whether the promise&#39;s value was successfully computed. This function
is synonymous with the <code>finally</code> clause in a synchronous API:</p>
<pre><code> // Synchronous API:
 try {
   doSynchronousWork();
 } finally {
   cleanUp();
 }

 // Asynchronous promise API:
 doAsynchronousWork().finally(cleanUp);
</code></pre>
<p><strong>Note:</strong> similar to the <code>finally</code> clause, if the registered
callback returns a rejected promise or throws an error, it will silently
replace the rejection error (if any) from this promise:</p>
<pre><code> try {
   throw Error(&#39;one&#39;);
 } finally {
   throw Error(&#39;two&#39;);  // Hides Error: one
 }

 let p &#61; Promise.reject(Error(&#39;one&#39;));
 promise.finally(p, function() {
   throw Error(&#39;two&#39;);  // Hides Error: one
 });
</code></pre>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>promise</var></td><td class="info-cell" ><code class="expression"><a href="https://github.com/google/closure-compiler/wiki/Special-types-in-the-Closure-Type-System#ithenable" target="_blank">IThenable</a>&lt;?&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The promise to add the listener to.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>callback</var></td><td class="info-cell" ><code class="expression">function(): (R|<a href="https://github.com/google/closure-compiler/wiki/Special-types-in-the-Closure-Type-System#ithenable" target="_blank">IThenable</a>&lt;(R|null)&gt;|null)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to call when
the promise is resolved.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="https://github.com/google/closure-compiler/wiki/Special-types-in-the-Closure-Type-System#ithenable" target="_blank">IThenable</a>&lt;(R|null)&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A promise that will be resolved with the callback
result.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3384" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="fulfilled"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>fulfilled<var class="template">&lt;T&gt;</var>( <var>opt_value</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;(T|null)&gt;</code></div></h3></div><div class="body"><p>Creates a promise that has been resolved with the given value.</p>
<p>If the promise manager is currently enabled, this function will return a
<a href="promise_exports_Promise.html">managed promise</a>. Otherwise, it will return a
native promise.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>opt_value</var></td><td class="info-cell" ><code class="expression">(T|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The resolved value.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;(T|null)&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>The resolved promise.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3385" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="fullyResolved"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>fullyResolved( <var>value</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></div></h3></div><div class="body"><p>Returns a promise that will be resolved with the input value in a
fully-resolved state. If the value is an array, each element will be fully
resolved. Likewise, if the value is an object, all keys will be fully
resolved. In both cases, all nested arrays and objects will also be
fully resolved.  All fields are resolved in place; the returned promise will
resolve on <code>value</code> and not a copy.</p>
<p>Warning: This function makes no checks against objects that contain
cyclical references:</p>
<pre><code> var value &#61; {};
 value[&#39;self&#39;] &#61; value;
 promise.fullyResolved(value);  // Stack overflow.
</code></pre>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>value</var></td><td class="info-cell" ><code class="expression">*</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The value to fully resolve.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A promise for a fully resolved version
of the input value.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3386" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="isGenerator"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>isGenerator( <var>fn</var> ) <var class="yield">→</var> <code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a></code></div></h3></div><div class="body"><p>Tests is a function is a generator.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>fn</var></td><td class="info-cell" ><code class="expression">Function</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to test.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>Whether the function is a generator.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3387" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="isPromise"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>isPromise( <var>value</var> ) <var class="yield">→</var> <code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a></code></div></h3></div><div class="body"><p>Determines whether a <code>value</code> should be treated as a promise.
Any object whose &#34;then&#34; property is a function will be considered a promise.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>value</var></td><td class="info-cell" ><code class="expression">?</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The value to test.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>Whether the value is a promise.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3388" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="map"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>map<var class="template">&lt;TYPE, SELF&gt;</var>( <var>arr</var>, <var>fn</var>, <var>opt_self</var> ) <var class="yield">→</var> <code class="expression"><i>void</i></code></div></h3></div><div class="body"><p>Calls a function for each element in an array and inserts the result into a
new array, which is used as the fulfillment value of the promise returned
by this function.</p>
<p>If the return value of the mapping function is a promise, this function
will wait for it to be fulfilled before inserting it into the new array.</p>
<p>If the mapping function throws or returns a rejected promise, the
promise returned by this function will be rejected with the same reason.
Only the first failure will be reported; all subsequent errors will be
silently ignored.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>arr</var></td><td class="info-cell" ><code class="expression">(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(TYPE|null)&gt;|<a href="promise_exports_Promise.html" title="selenium-webdriver/lib/promise.Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(TYPE|null)&gt;&gt;)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The
array to iterator over, or a promise that will resolve to said array.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>fn</var></td><td class="info-cell" ><code class="expression">function(this: (SELF|null), (TYPE|null), <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank">number</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank">Array</a>&lt;(TYPE|null)&gt;): ?</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The
function to call for each element in the array. This function should
expect three arguments (the element, the index, and the array itself.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_self</var></td><td class="info-cell" ><code class="expression">(SELF|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The object to be used as the value of &#39;this&#39; within
<code>fn</code>.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3389" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="rejected"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>rejected( <var>opt_reason</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;?&gt;</code></div></h3></div><div class="body"><p>Creates a promise that has been rejected with the given reason.</p>
<p>If the promise manager is currently enabled, this function will return a
<a href="promise_exports_Promise.html">managed promise</a>. Otherwise, it will return a
native promise.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>opt_reason</var></td><td class="info-cell" ><code class="expression">*</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The rejection reason; may be any value, but is
usually an Error or a string.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a>&lt;?&gt;</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>The rejected promise.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3390" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="setDefaultFlow"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>setDefaultFlow( <var>flow</var> ) <var class="yield">→</var> <code class="expression"><i>void</i></code></div></h3></div><div class="body"><p>Changes the default flow to use when no others are active.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>flow</var></td><td class="info-cell" ><code class="expression"><a href="promise_exports_ControlFlow.html" title="selenium-webdriver/lib/promise.ControlFlow">ControlFlow</a></code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The new default flow.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Throws</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression">(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank">Error</a>|null)</code></td></tr><tr class="info-row" ><td class="info-cell" ><p>If the default flow is not currently active.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3391" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="when"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div class="tags"><span class="deprecated"></span></div><div>when( <var>value</var>, <var>opt_callback</var>, <var>opt_errback</var> ) <var class="yield">→</var> <code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></div></h3></div><div class="body"><p>Registers an observer on a promised <code>value</code>, returning a new promise
that will be resolved when the value is. If <code>value</code> is not a promise,
then the return promise will be immediately resolved.</p>
<table class="info deprecation"><tr class="info-row" ><th class="info-head"><i class="material-icons">warning</i> Deprecated</th><td class="info-cell" ><p>Use <code>promise.fulfilled(value).then(opt_callback, opt_errback)</code></p>
</td></tr></table><table class="info"><tr class="info-row block" ><th class="info-head">Parameters</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><var>value</var></td><td class="info-cell" ><code class="expression">*</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The value to observe.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_callback</var></td><td class="info-cell" ><code class="expression">(Function|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to call when the value is
resolved successfully.</p>
</td></tr><tr class="info-row" ><td class="info-cell" ><var>opt_errback</var></td><td class="info-cell" ><code class="expression">(Function|null|undefined)</code></td></tr><tr class="info-row" ><td class="info-cell" ></td><td class="info-cell" ><p>The function to call when the value is
rejected.</p>
</td></tr></table></td></tr><tr class="info-row block" ><th class="info-head">Returns</th><td class="info-cell" ><table class="info detail"><tr class="info-row" ><td class="info-cell" ><code class="expression"><a href="promise_exports_Thenable.html" title="selenium-webdriver/lib/promise.Thenable">Thenable</a></code></td></tr><tr class="info-row" ><td class="info-cell" ><p>A new promise.</p>
</td></tr></table></td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3392" target="_blank" title="View source">VIEW SOURCE</a></div></div></section></section><section class="instance-methods"><h2>Exported Properties</h2><section class="property expandable"  id="LONG_STACK_TRACES"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>LONG_STACK_TRACES <var class="yield">→</var> <code class="expression">?</code></div></h3></div><div class="body"><p>No information.</p><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3411" target="_blank" title="View source">VIEW SOURCE</a></div></div></section><section class="property expandable"  id="USE_PROMISE_MANAGER"><div class="header"><div class="more"><i class="material-icons">expand_more</i></div><h3 class="name"><div>USE_PROMISE_MANAGER <var class="yield">→</var> <code class="expression"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank">boolean</a></code></div></h3></div><div class="body"><p>Indicates whether the promise manager is currently enabled. When disabled,
attempting to use the <a href="promise_exports_ControlFlow.html"><code>ControlFlow</code></a> or <a href="promise_exports_Promise.html"><code>Promise</code></a>
classes will generate an error.</p>
<p>The promise manager is currently enabled by default, but may be disabled
by setting the environment variable <code>SELENIUM_PROMISE_MANAGER&#61;0</code> or by
setting this property to false. Setting this property will always take
precedence over the use of the environment variable.</p>
<table class="info"><tr class="info-row block" ><th class="info-head">See Also</th><td class="info-cell" ><p><a href="https://github.com/SeleniumHQ/selenium/issues/2969">https://github.com/SeleniumHQ/selenium/issues/2969</a></p>
</td></tr></table><div class="source"><a href="https://github.com/SeleniumHQ/selenium/tree/master/javascript/node/selenium-webdriver/lib/promise.js#L3407" target="_blank" title="View source">VIEW SOURCE</a></div></div></section></section><section class="types"><h2>Exported Interfaces</h2><ul><li class="summary"><div><a href="promise_exports_CancellableThenable.html">CancellableThenable</a></div><li class="summary"><div><a href="promise_exports_Resolver.html">Resolver</a></div><li class="summary"><div><a href="promise_exports_Scheduler.html">Scheduler</a></div><li class="summary"><div><a href="promise_exports_Thenable.html">Thenable</a></div></ul></section><section class="types"><h2>Exported Classes</h2><ul><li class="summary"><div><a href="promise_exports_CancellationError.html">CancellationError</a></div><li class="summary"><div><a href="promise_exports_ControlFlow.html">ControlFlow</a></div><li class="summary"><div><a href="promise_exports_Deferred.html">Deferred</a></div><li class="summary"><div><a href="promise_exports_MultipleUnhandledRejectionError.html">MultipleUnhandledRejectionError</a></div><li class="summary"><div><a href="promise_exports_Promise.html">Promise</a></div></ul></section></article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="../../../types.js"></script><script src="../../../dossier.js"></script>